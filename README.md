# Monoworker

Тестовое задание; воркер, выполняющий длительные задачи, с HTTP API.

## Запуск

Отладочный сервер:

```bash
go run .
```

Продакшен сервер:

```bash
GIN_MODE=release PORT=8080 go run .
```

Тесты:

```bash
go test github.com/girvel/monoworker/src
```

## Детали реализации

- Многопоточный/асинхронный сервер, все расшаренные данные покрыты мьютексами
- За счёт генериков реализация воркера не зависит от типа работы, который он будет делать; можно вместо демонстрационного преобразования строк дать ему крэпинг или большие вычисления и он сразу будет работать (это касается только воркера, апи надо будет переписать в соответствии)
- Есть тесты -- один для воркера и один для HTTP рутера; можно было накидать ещё штук 10, но в них не было бы ничего принципиально нового
- Можно сконфигурировать лимиты для очереди задач/количества одновременно выполняющихся задач
- Нельзя случайно потерять данные, пустив SIGINT -- пока у воркера есть таски, он будет кидаться ворнингами и не давать; приложение всё ещё можно выключить, просто через SIGKILL или Ctrl+\
- Код разбит по файлам на самого воркера и его апи, внутренние функции/структуры/поля оформлены как приватные
